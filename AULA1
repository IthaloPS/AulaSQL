CREATE DATABASE "LBD"
TEMPLATE = TEMPLATE0
ENCODING "WIN1252"
CONNECTION LIMIT -1;

CREATE TABLE tb_cliente(
id_cliente INTEGER,
titulo CHAR(4),
NOME VARCHAR(32) CONSTRAINT nn_cliente_nome NOT NULL,
sobrenome VARCHAR(32) CONSTRAINT nn_cliente_sobrenome NOT NULL,
endereco VARCHAR(52) CONSTRAINT nn_cliente_endereco NOT NULL,
numero VARCHAR(5) CONSTRAINT nn_cliente_numero NOT NULL,
complemento VARCHAR(52),
cep VARCHAR(10),
cidade VARCHAR(52) CONSTRAINT nn_cliente_cidade NOT NULL,
estado CHAR(2) CONSTRAINT nn_cliente_estado NOT NULL,
fone_fixo VARCHAR(15) CONSTRAINT nn_cliente_fone_fixo NOT NULL,
fone_movel VARCHAR(15) CONSTRAINT nn_cliente_fone_movel NOT NULL,
fg_ativo INTEGER,
CONSTRAINT pk_cliente_id_cliente PRIMARY KEY(id_cliente)
);

CREATE TABLE tb_item (
	id_item integer,
	ds_item	varchar(64) constraint nn_item_ds_item not null,
	preco_custo	numeric(7,2),
	preco_venda	numeric(7,2),
	fg_ativo	integer,
	CONSTRAINT pk_item_id_item PRIMARY KEY(id_item)
);

create table tb_pedido(
id_pedido  integer,
id_cliente  integer constraint nn_pedido_id_cliente not null,
dt_compra  timestamp,
dt_entrega  timestamp,
valor  numeric(7,2),
fg_ativo  integer,
constraint pk_pedido_id_pedido primary key(id_pedido),
constraint fk_pedido_id_cliente foreign key(id_cliente)
  references tb_cliente(id_cliente)
);

create table tb_pedido(
id_pedido  integer,
id_cliente  integer constraint nn_pedido_id_cliente not null,
dt_compra  timestamp,
dt_entrega  timestamp,
valor  numeric(7,2),
fg_ativo  integer,
constraint pk_pedido_id_pedido primary key(id_pedido),
constraint fk_pedido_id_cliente foreign key(id_cliente)
  references tb_cliente(id_cliente)
);

create table tb_codigo_barras(
	codigo_barras integer
		constraint nn_cod_barras_codigo_barras not null,
	id_item	integer constraint nn_cod_barras_id_item not null,
		constraint fk_cod_barras_id_item foreign key(id_item)
			references tb_item(id_item)
);

create table tb_estoque(
	id_item	integer,
	quantidade	integer,
	constraint pk_estoque_id_item primary key(id_item),
	constraint fk_estoque_id_item foreign key(id_item)
		references tb_item(id_item)
);

insert into tb_cliente(id_cliente, titulo, nome, sobrenome, endereco, numero, complemento, cep, cidade, estado, fone_fixo, fone_movel, fg_ativo)
VALUES
(1,'Sra','Jessica','Mendes','Avenida Acelino de Leao','89',NULL,
'68900 300','Macapá','AP','3565 1243', '8765 8999',1),
(2,'Sr','Andrei','Junqueira','Rua Tabaiares','1024',null,
'30150 040','Belo Horizonte','MG','3676 1209','8876 4543',1),
(3,'Alex','Matheus','Rua Eva Terpins','s/n', null,
'05327 030', 'São Paulo','SP','6576 0099','9358 7676',1);
